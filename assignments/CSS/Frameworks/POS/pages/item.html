<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Item</title>
    <link href="../favIcon.png" rel="icon">
    <meta content="Akila Piumal" name="author">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <link href="../assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="../assets/css/style.css" rel="stylesheet">
</head>
<body>
<nav class="navbar navbar-expand-lg fixed-top"
     style="background-image: linear-gradient(315deg,#00b712 0%,#5aff15 74%);">
    <div class="container-fluid">
        <span class="navbar-brand fw-bolder fs-3 mb-0 text-white h1">
                <img alt="Logo" class="d-inline-block align-text-top" height="30" src="../assets/images/Cart.png"
                     width="30">
                My Shop
            </span>
        <button aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"
                class="navbar-toggler"
                data-bs-target="#navbarSupportedContent" data-bs-toggle="collapse" type="button">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0 px-5">
                <li class="nav-item">
                    <a class="nav-link" href="home.html">Home</a>
                </li>
                <li class="nav-item">
                    <a aria-current="page" class="nav-link active text-decoration-underline fw-bold text-white"
                       href="item.html">Items</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="customer.html">Customers</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="order.html">Orders</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="cart.html">Cart</a>
                </li>
            </ul>
        </div>
    </div>
</nav>

<main class="container-fluid mt-5 pt-4">
    <div class="mt-1">
        <h3 class="small text-muted">Home > Items</h3>
    </div>
    <hr class="mb-2 mt-0">

    <section>
        <div class="row mt-3 mx-lg-2">
            <!--select id-->
            <div class="col-5 col-sm-3 col-md-2 pb-2">
                <select aria-label=".form-select-lg example" class="form-select form-select-ls " id="cmbSelect">
                    <option selected value="code">CODE</option>
                    <option value="name">NAME</option>
                </select>
            </div>
            <!--search-->
            <div class="col-12 col-sm-9 col-md-6 col-xl-5 pb-2">
                <div class="d-flex">
                    <input aria-label="Search" class="form-control me-2" id="searchBar" placeholder="Search Item">
                    <button class="btn btn-outline-primary" id="btnSearchForItem" type="submit">Search</button>
                </div>
            </div>
            <!--add item button-->
            <div class="col">
                <div class="col d-flex justify-content-center justify-content-md-end">
                    <button class="btn btn-primary col-6 col-sm-3 col-md-6 col-lg-5 col-xl-3"
                            data-bs-target="#newItemModel"
                            data-bs-toggle="modal"
                            type="button">+New Item
                    </button>

                    <!-- New Item Modal -->
                    <div aria-hidden="true" aria-labelledby="newItemModelLabel" class="modal fade"
                         id="newItemModel"
                         tabindex="-1">
                        <div class="modal-dialog modal-dialog-centered">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="newItemModelLabel">New Item</h5>
                                    <button aria-label="Close" class="btn-close" data-bs-dismiss="modal"
                                            type="button"></button>
                                </div>
                                <div class="modal-body">
                                    <div class="container-fluid">

                                        <div class="row">
                                            <div>
                                                <label class="form-label" for="newItemCode">Item Code</label>
                                                <input class="form-control" id="newItemCode" placeholder="P001"
                                                       type="text">
                                                <label class="form-label" for="newItemCode" id="warnMsgForCode"
                                                       style="display: none;color: red;font-size: 12px">Item Code is a
                                                    required field: Pattern-P001</label>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div>
                                                <label class="form-label" for="newItemName">Item Name</label>
                                                <input class="form-control" id="newItemName" type="text">
                                                <label class="form-label" for="newItemName" id="warnMsgForItemName"
                                                       style="display: none;color: red;font-size: 12px">Item Name is
                                                    a required field. Minimum-4, Maximum-25, Spaces Allowed.</label>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div>
                                                <label class="form-label " for="OneItemPrice">Item Price</label>
                                                <input class="form-control" id="OneItemPrice" placeholder="1000.00"
                                                       type="text">
                                                <label class="form-label" for="OneItemPrice" id="warnMsgForPrice"
                                                       style="display: none;color: red;font-size: 12px">Item Price is
                                                    a required field. Pattern- 100 or 100.00</label>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div>
                                                <label class="form-label " for="NewItemQuantity">Item Quantity</label>
                                                <input class="form-control" id="NewItemQuantity" type="number">
                                                <label class="form-label" for="NewItemQuantity" id="warnMsgForQuantity"
                                                       style="display: none;color: red;font-size: 12px">Quantity is
                                                    a required field. Pattern- 100</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="modal-footer mt-2 d-flex justify-content-center">
                                    <button class="btn btn-outline-success" id="btnSaveItem" type="button">Save</button>
                                    <button class="btn btn-outline-danger" data-bs-dismiss="modal"
                                            id="btnClose" type="button">Close
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="rounded-3 border shadow-lg mt-3 mx-lg-3 bg-success bg-opacity-25">
            <!--item details-->
            <div class="row gx-3 m-3 ">
                <!--item Code-->
                <div class="col-12 col-sm-6 col-md-3 text-center text-sm-start text-lg-center">
                    <label class="form-label fw-bold" for="itemCode">Item Code</label>
                    <input class="form-control" id="itemCode" type="text">
                </div>

                <!--item Name-->
                <div class="col-12 col-sm-6 col-md-3 text-center text-sm-start text-lg-center">
                    <label class="form-label fw-bold" for="itemName">Item name</label>
                    <input class="form-control" id="itemName" readonly type="text">
                </div>

                <!--item price-->
                <div class="col-12 col-sm-6 col-md-3 text-center text-sm-start text-lg-center">
                    <label class="form-label fw-bold" for="itemPrice">Item Price</label>
                    <input class="form-control" id="itemPrice" readonly type="text">
                </div>

                <!--item Quantity-->
                <div class="col-12 col-sm-6 col-md-3 text-center text-sm-start text-lg-center">
                    <label class="form-label fw-bold" for="itemQuantity">Item Quantity</label>
                    <input class="form-control" id="itemQuantity" readonly type="text">
                </div>
            </div>

            <!--Buttons-->
            <div class="row mb-4 mt-4">
                <div class="d-flex justify-content-center">
                    <!--delete button-->
                    <button class="btn btn-outline-danger col-3 col-md-2 col-lg-1 mx-2"
                            id="btnDelete" type="button">Delete
                    </button>

                    <!--update button-->
                    <button class="btn btn-outline-primary col-3 col-md-2 col-lg-1 mx-2"
                            data-bs-target="#updateItemModel"
                            data-bs-toggle="modal"
                            id="btnUpdate" type="button">Update
                    </button>

                    <!-- Update Item Modal -->
                    <div aria-hidden="true" aria-labelledby="updateItemModelLabel" class="modal fade"
                         id="updateItemModel"
                         tabindex="-1">
                        <div class="modal-dialog modal-dialog-centered">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="updateItemModelLabel">Update Item</h5>
                                    <button aria-label="Close" class="btn-close" data-bs-dismiss="modal"
                                            type="button"></button>
                                </div>
                                <div class="modal-body">
                                    <div class="container-fluid">

                                        <div class="row">
                                            <div>
                                                <label class="form-label" for="itemCodeNew">Item
                                                    Code</label>
                                                <input class="form-control" id="itemCodeNew" readonly type="text">
                                                <label class="form-label" for="itemCodeNew" id="warnMsgForCodeNew"
                                                       style="display: none;color: red;font-size: 12px">Item Code is a
                                                    required field: Pattern-P001</label>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div>
                                                <label class="form-label" for="itemNameNew">Item
                                                    Name</label>
                                                <input class="form-control" id="itemNameNew" type="text">
                                                <label class="form-label" for="itemNameNew" id="warnMsgForItemNameNew"
                                                       style="display: none;color: red;font-size: 12px">Item Name is
                                                    a required field. Minimum-4, Maximum-25, Spaces Allowed.</label>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div>
                                                <label class="form-label "
                                                       for="itemPriceNew">Item Price</label>
                                                <input class="form-control" id="itemPriceNew"
                                                       placeholder="1000.00" type="text">
                                                <label class="form-label" for="itemPriceNew" id="warnMsgForPriceNew"
                                                       style="display: none;color: red;font-size: 12px">Item Price is
                                                    a required field. Pattern- 100 or 100.00</label>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div>
                                                <label class="form-label " for="itemQuantityNew">Item
                                                    Quantity</label>
                                                <input class="form-control" id="itemQuantityNew"
                                                       type="number">
                                                <label class="form-label" for="itemQuantityNew"
                                                       id="warnMsgForQuantityNew"
                                                       style="display: none;color: red;font-size: 12px">Quantity is
                                                    a required field. Pattern- 100</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="modal-footer mt-2 d-flex justify-content-center">
                                    <button class="btn btn-outline-success" id="btnUpdateItem" type="button">Update
                                    </button>
                                    <button class="btn btn-outline-danger" data-bs-dismiss="modal"
                                            id="btnCloseInUpdateItem" type="button">Close
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!--Clear button-->
                    <button class="btn btn-outline-dark col-3 col-md-2 col-lg-1 mx-2" id="btnClear" type="button">Clear
                    </button>
                </div>
            </div>
        </div>

        <hr class="mt-4">

        <!--table section-->
        <section class="container-fluid">
            <div class="d-block position-relative overflow-auto" style="height: 300px">
                <table class="table container-lg overflow-hidden text-center">
                    <thead class="text-white" style="background-color: #00b712">
                    <tr>
                        <th scope="col">Item Code</th>
                        <th scope="col">Item Name</th>
                        <th scope="col">Item Price</th>
                        <th scope="col">Quantity On Hand</th>
                    </tr>
                    </thead>
                    <tbody id="tblItem">

                    </tbody>
                </table>
            </div>
        </section>

    </section>
</main>
<script src="../assets/js/jquery-3.6.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.4.33/dist/sweetalert2.all.min.js"></script>
<script>
    var Items = [];

    $('#btnSaveItem').click(function () {
        Swal.fire({
            title: 'Do you want to save the Item?',
            showDenyButton: true,
            confirmButtonText: 'Save',
            denyButtonText: `Don't save`,
        }).then((result) => {
            if (result.isConfirmed) {
                saveItem();
                Swal.fire('Saved!', '', 'success');
                $('#newItemModel').modal('hide');
                clearFields();
            } else if (result.isDenied) {
                Swal.fire('Changes are not saved', '', 'info')
            }
        });
    });

    function clearFields() {
        $('#newItemCode').val('');
        $('#newItemName').val('');
        $('#OneItemPrice').val('');
        $('#NewItemQuantity').val('');
        $('#newItemCode').css("border", "1px solid gray");
        $('#newItemName').css("border", "1px solid gray");
        $('#OneItemPrice').css("border", "1px solid gray");
        $('#NewItemQuantity').css("border", "1px solid gray");
    }

    function saveItem() {
        var item = {
            code: $('#newItemCode').val(),
            name: $('#newItemName').val(),
            price: $('#OneItemPrice').val(),
            quantity: $('#NewItemQuantity').val()
        }

        Items.push(item);

        addDataToTable();

        bindRowClickEvent();

        bindRowDblClickEvent();
    }

    function addDataToTable() {
        $('#tblItem').empty();

        for (var item of Items) {
            var row = `<tr><th scope="row">${item.code}</th><td>${item.name}</td><td>${item.price}</td><td>${item.quantity}</td></tr>`

            $('#tblItem').append(row);
            $("#tblItem>tr").css('cursor', 'pointer');
        }
    }

    function setValues(code, name, price, quantity) {
        $('#itemCode').val(code);
        $('#itemName').val(name);
        $('#itemPrice').val(price);
        $('#itemQuantity').val(quantity);
        $('#btnUpdate').removeAttr("disabled");
        $('#btnDelete').removeAttr("disabled");
    }

    function bindRowClickEvent() {
        $('#tblItem>tr').click(function () {
            let code = $(this).children().eq('0').text();
            let name = $(this).children().eq('1').text();
            let price = $(this).children().eq('2').text();
            let quantity = $(this).children().eq('3').text();

            setValues(code, name, price, quantity);
        });
    }

    function searchItemWithCode(code) {
        for (let i = 0; i < Items.length; i++) {
            if (code === (Items[i].code)) {
                let item = {
                    code: Items[i].code,
                    name: Items[i].name,
                    price: Items[i].price,
                    quantity: Items[i].quantity
                }
                return item;
            }
        }
        return null;
    }

    function searchItemWithName(name) {
        for (let i = 0; i < Items.length; i++) {
            if (name === (Items[i].name)) {
                let item = {
                    code: Items[i].code,
                    name: Items[i].name,
                    price: Items[i].price,
                    quantity: Items[i].quantity
                }
                return item;
            }
        }
        return null;
    }

    function searchItem() {
        let searchBarText = $('#searchBar').val();

        if ($('#cmbSelect').find('option:selected').val() === "code") {
            if ($.isEmptyObject(Items)) {
                Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: 'Empty Set',
                })
            } else {
                if (searchItemWithCode(searchBarText) !== null) {
                    let item = searchItemWithCode(searchBarText);
                    setValues(item.code, item.name, item.price, item.quantity)
                } else {
                    Swal.fire({
                        icon: 'error',
                        title: 'Oops...',
                        text: 'Item not exist'
                    })
                    clearItemDetailsFields();
                }
            }
        } else if ($('#cmbSelect').find('option:selected').val() === "name") {

            if ($.isEmptyObject(Items)) {
                Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: 'Empty Set',
                })
            } else {
                if (searchItemWithName(searchBarText) !== null) {
                    let item = searchItemWithName(searchBarText);
                    setValues(item.code, item.name, item.price, item.quantity)
                } else {
                    Swal.fire({
                        icon: 'error',
                        title: 'Oops...',
                        text: 'Item not exist'
                    })
                    clearItemDetailsFields();
                }
            }
        }
    }

    function clearItemDetailsFields() {
        $('#itemCode').val('');
        $('#itemName').val('');
        $('#itemPrice').val('');
        $('#itemQuantity').val('');
        $('#searchBar').val('');
        $('#btnUpdate').attr('disabled', true);
        $('#btnDelete').attr('disabled', true);
    }

    $(window).ready(function () {
        $('#btnUpdate').attr('disabled', true);
        $('#btnDelete').attr('disabled', true);
    });

    // key event to ENTER key
    $('#itemCode').keypress(function (e) {
        if (e.which == 13) {
            if ($.isEmptyObject(Items)) {
                Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: 'Empty Set',
                })
            } else {
                if (searchItemWithCode($('#itemCode').val()) !== null) {
                    let item = searchItemWithCode($('#itemCode').val());
                    setValues(item.code, item.name, item.price, item.quantity)
                } else {
                    Swal.fire({
                        icon: 'error',
                        title: 'Oops...',
                        text: 'Item not exist'
                    })
                    clearItemDetailsFields();
                }
            }
        }
    });

    $('#searchBar').keypress(function (e) {
        if (e.which == 13) {
            searchItem();
        }
    });

    $('#btnSearchForItem').click(function () {
        searchItem();
    });

    $("#newItemModel").on('shown.bs.modal', function () {
        $(this).find('#btnSaveItem').attr("disabled", true);
        $(this).find('#newItemCode').focus();
    });

    var itemCodePattern = /^(P)[0-9]{3}$/;
    var itemNamePattern = /^[A-z0-9 ]{4,25}$/;
    var itemPricePattern = /^[1-9][0-9]*(.[0-9]{2})?$/;
    var itemQuantityPattern = /^[1-9][0-9]*$/;

    function testPattern(val, pattern) {
        return pattern.test(val);
    }

    function validate(object, pattern, warnMsgObject, btnObject, nextFocusPattern, nextFocusObject, nextWarnMsgObj) {
        let val = object.val();
        let result = testPattern(val, pattern);
        if (result !== true) {
            object.css("border", "3px solid red");
            warnMsgObject.css('display', 'block');
            btnObject.attr("disabled", true);

            return false;
        } else {
            object.css("border", "3px solid green");
            warnMsgObject.css('display', 'none');
            btnObject.removeAttr("disabled");

            if (nextFocusObject !== null) {
                let focusedTextVal = nextFocusObject.val();
                if (testPattern(focusedTextVal, nextFocusPattern) === false) {
                    nextFocusObject.css("border", "3px solid red");
                    nextWarnMsgObj.css('display', 'block');
                    btnObject.attr("disabled", true);
                }
            }

            return true;
        }
    }

    $('#newItemCode').on('keyup', function (event) {

        let currentObject = $('#newItemCode');
        let currentPattern = itemCodePattern;
        let warnMsgObject = $('#warnMsgForCode');
        let btnObject = $('#btnSaveItem');
        let nextFocusPattern = itemNamePattern;
        let nextFocusObject = $('#newItemName');
        let nextWarnMsgObj = $('#warnMsgForItemName');

        let result = validate(currentObject, currentPattern, warnMsgObject, btnObject, nextFocusPattern, nextFocusObject, nextWarnMsgObj);

        if (event.which === 13) {
            if (result === true) {
                $('#newItemName').focus();
            }
        }
    });

    $('#newItemName').on('keyup', function (event) {

        let currentObject = $('#newItemName');
        let currentPattern = itemNamePattern;
        let warnMsgObject = $('#warnMsgForItemName');
        let btnObject = $('#btnSaveItem');
        let nextFocusPattern = itemPricePattern;
        let nextFocusObject = $('#OneItemPrice');
        let nextWarnMsgObj = $('#warnMsgForPrice');

        let result = validate(currentObject, currentPattern, warnMsgObject, btnObject, nextFocusPattern, nextFocusObject, nextWarnMsgObj);

        if (event.which === 13) {
            if (result === true) {
                $('#OneItemPrice').focus();
            }
        }
    });

    $('#OneItemPrice').on('keyup', function (event) {

        let currentObject = $('#OneItemPrice');
        let currentPattern = itemPricePattern;
        let warnMsgObject = $('#warnMsgForPrice');
        let btnObject = $('#btnSaveItem');
        let nextFocusPattern = itemQuantityPattern;
        let nextFocusObject = $('#NewItemQuantity');
        let nextWarnMsgObj = $('#warnMsgForQuantity');

        let result = validate(currentObject, currentPattern, warnMsgObject, btnObject, nextFocusPattern, nextFocusObject, nextWarnMsgObj);

        if (event.which === 13) {
            if (result === true) {
                $('#NewItemQuantity').focus();
            }
        }
    });

    $('#NewItemQuantity').on('keyup', function (event) {

        let currentObject = $('#NewItemQuantity');
        let currentPattern = itemQuantityPattern;
        let warnMsgObject = $('#warnMsgForQuantity');
        let btnObject = $('#btnSaveItem');
        let nextFocusPattern = null;
        let nextFocusObject = null;
        let nextWarnMsgObj = null;

        let result = validate(currentObject, currentPattern, warnMsgObject, btnObject, nextFocusPattern, nextFocusObject, nextWarnMsgObj);

        if (event.which === 13) {
            if (result === true) {
                Swal.fire({
                    title: 'Do you want to save the Item?',
                    showDenyButton: true,
                    confirmButtonText: 'Save',
                    denyButtonText: `Don't save`,
                }).then((result) => {
                    /* Read more about isConfirmed, isDenied below */
                    if (result.isConfirmed) {
                        Swal.fire('Saved!', '', 'success');
                        saveItem();
                        $('#newItemModel').modal('hide');
                        clearFields();
                    } else if (result.isDenied) {
                        clearFields();
                        $('#newItemModel').modal('hide');
                        Swal.fire('Changes are not saved', '', 'info')
                    }
                });
            }
        }
    });

    $('#newItemCode, #newItemName, #OneItemPrice, #NewItemQuantity, #itemCodeNew, #itemNameNew, #itemPriceNew, #itemQuantityNew').on('keydown', function (event) {
        if (event.key === "Tab") {
            event.preventDefault();
        }
    });

    $('#btnClear').click(function () {
        clearItemDetailsFields();
    });

    $('#btnClose').click(function () {
        clearFields();
    });

    function bindRowDblClickEvent() {
        $('#tblItem>tr').on('dblclick', function () {

            let code = $(this).children().eq('0').text();

            deleteItem(code);

        });
    }

    $("#updateItemModel").on('shown.bs.modal', function () {
        $('#itemCodeNew').val($('#itemCode').val());
        $('#itemNameNew').val($('#itemName').val());
        $('#itemPriceNew').val($('#itemPrice').val());
        $('#itemQuantityNew').val($('#itemQuantity').val());
        $('#itemNameNew').focus();
        $('#btnUpdateItem').attr("disabled", true);

        $('#itemCodeNew').css("border", "3px solid green");
        $('#itemNameNew').css("border", "3px solid green");
        $('#itemPriceNew').css("border", "3px solid green");
        $('#itemQuantityNew').css("border", "3px solid green");
    });

    $('#itemNameNew').on('keyup', function (event) {

        let currentObject = $('#itemNameNew');
        let currentPattern = itemNamePattern;
        let warnMsgObject = $('#warnMsgForItemNameNew');
        let btnObject = $('#btnUpdateItem');

        let result = validate(currentObject, currentPattern, warnMsgObject, btnObject, null, null, null);

        if (event.which === 13) {
            if (result === true) {
                $('#itemPriceNew').focus();
            }
        }

    });

    $('#itemPriceNew').on('keyup', function (event) {

        let currentObject = $('#itemPriceNew');
        let currentPattern = itemPricePattern;
        let warnMsgObject = $('#warnMsgForPriceNew');
        let btnObject = $('#btnUpdateItem');

        let result = validate(currentObject, currentPattern, warnMsgObject, btnObject, null, null, null);

        if (event.which === 13) {
            if (result === true) {
                $('#itemQuantityNew').focus();
            }
        }
    });

    $('#itemQuantityNew').on('keyup', function (event) {

        let currentObject = $('#itemQuantityNew');
        let currentPattern = itemQuantityPattern;
        let warnMsgObject = $('#warnMsgForQuantityNew');
        let btnObject = $('#btnUpdateItem');

        let result = validate(currentObject, currentPattern, warnMsgObject, btnObject, null, null, null);

        if (event.which === 13) {
            if (result === true) {
                Swal.fire({
                    title: 'Do you want to Update the Item?',
                    showDenyButton: true,
                    confirmButtonText: 'Update',
                    denyButtonText: `Don't update`,
                }).then((result) => {
                    if (result.isConfirmed) {
                        Swal.fire('Updated!', '', 'success');
                        updateItem();
                        clearUpdateModelFields();
                        clearItemDetailsFields();
                        $('#updateItemModel').modal('hide');
                    } else if (result.isDenied) {
                        clearUpdateModelFields();
                        clearItemDetailsFields();
                        $('#updateItemModel').modal('hide');
                        Swal.fire('Changes are not saved', '', 'info')
                    }
                });
            }
        }
    });

    function updateItem() {
        let code = $('#itemCodeNew').val();
        let name = $('#itemNameNew').val();
        let price = $('#itemPriceNew').val();
        let quantity = $('#itemQuantityNew').val();

        for (var item of Items) {
            if (item.code === code) {
                let index = Items.indexOf(item);
                Items[index].name = name;
                Items[index].price = price
                Items[index].quantity = quantity;
            }
        }

        $('#tblItem>tr').children().eq('1').text(name);
        $('#tblItem>tr').children().eq('2').text(price);
        $('#tblItem>tr').children().eq('3').text(quantity);
    }

    function clearUpdateModelFields() {
        $('#itemCodeNew').val('');
        $('#itemNameNew').val('');
        $('#itemPriceNew').val('');
        $('#itemQuantityNew').val('');
        $('#itemCodeNew').css("border", "1px solid gray");
        $('#itemNameNew').css("border", "1px solid gray");
        $('#itemPriceNew').css("border", "1px solid gray");
        $('#itemQuantityNew').css("border", "1px solid gray");
    }

    $('#btnUpdateItem').click(function () {
        Swal.fire({
            title: 'Do you want to Update the Item?',
            showDenyButton: true,
            confirmButtonText: 'Update',
            denyButtonText: `Don't update`,
        }).then((result) => {
            if (result.isConfirmed) {
                Swal.fire('Updated!', '', 'success');
                updateItem();
                clearUpdateModelFields();
                clearItemDetailsFields();
                $('#updateItemModel').modal('hide');
            } else if (result.isDenied) {
                clearUpdateModelFields();
                clearItemDetailsFields();
                $('#updateItemModel').modal('hide');
                Swal.fire('Changes are not saved', '', 'info')
            }
        });
    });

    $('#btnCloseInUpdateItem').click(function () {
        clearUpdateModelFields();
    });

    function deleteItem(code) {
        Swal.fire({
            title: 'Are you sure?',
            text: "You won't be able to revert this!",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Yes, delete it!'
        }).then((result) => {
            if (result.isConfirmed) {
                for (var item of Items) {
                    if (item.code === code) {
                        let index = Items.indexOf(item);
                        Items.splice(index, 1);
                    }
                }
                addDataToTable();
                bindRowClickEvent();
                bindRowDblClickEvent();
                clearItemDetailsFields();
                Swal.fire(
                    'Deleted!',
                    'Your file has been deleted.',
                    'success'
                )
            }
        });
    }

    $('#btnDelete').click(function () {
        let code = $('#itemCode').val();
        deleteItem(code);
    });

</script>
<script src="../assets/js/bootstrap.min.js"></script>
</body>
</html>